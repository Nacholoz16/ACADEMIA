<!-- =============================================== -->
<!-- 1. CONTENEDOR PRINCIPAL Y CARRUSEL HERO         -->
<!-- =============================================== -->
<div class="container-fluid px-md-4 py-4">

  @if (carouselSlides) {
    <!-- Carrusel con diseño mejorado para legibilidad -->
    <ngb-carousel class="shadow-sm rounded-3 overflow-hidden mb-5" [showNavigationArrows]="false" [interval]="10000">
      @for (carouselSlide of carouselSlides; track $index) {
        <ng-template ngbSlide>
          <div class="position-relative" style="height: 600px;">
            <!-- Imagen de fondo -->
            <img [src]="carouselSlide.imagen" 
                 [alt]="carouselSlide.titulo" 
                 class="w-100 h-100" 
                 style="object-fit: cover;" />

            <!-- Caja de contenido superpuesta (Estilo Udemy) -->
            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center">
              <div class="col-lg-4 col-md-6 ms-md-5 ms-3">
                <!-- La tarjeta de contenido ahora agrupa los elementos con un fondo, sombra y espaciado -->
                <div class="bg-dark bg-opacity-75 p-4 p-md-5 rounded-3 shadow-lg">
                  <h1 class="display-5 fw-bold mb-3 text-white">{{carouselSlide.titulo}}</h1>
                  <p class="fs-5 d-none d-md-block text-white-50">{{carouselSlide.descripcion}}</p>
                  <button class="btn btn-info btn-lg fw-bold mt-3">Ver cursos</button>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      }
    </ngb-carousel>
  }

  <!-- =============================================== -->
  <!-- 2. SECCIONES DE CURSOS POR CATEGORÍA            -->
  <!-- =============================================== -->
  @if (cargandoCursos) {
    <!-- Spinner de carga centrado -->
    <div class="d-flex justify-content-center py-5">
      <app-spinner-general [cargando]="cargandoCursos" [minTimeMs]="1500" />
    </div>
  } @else {
    @for (categoria of categorias.slice(0, 4); track categoria) {
      <div class="mb-5">
        <!-- Encabezado de la categoría -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="fw-bold mb-0">
            {{ categoria.charAt(0).toUpperCase() + categoria.slice(1) }}
          </h2>
          <a href="#" class="btn btn-outline-info fw-bold">Ver todos</a>
        </div>

        <!-- Fila de cursos con scroll horizontal -->
        <div class="d-flex overflow-auto gap-3 pb-3">
          @for(curso of cursosPorCategoriaMap.get(categoria) || []; track curso.id) {
            <!-- Tarjeta de Curso Estilo Udemy (Ancho fijo para consistencia) -->
            <div class="card border-light shadow-sm flex-shrink-0" style="width: 280px; cursor: pointer;" (click)="irCurso(curso.id)">
              <img [src]="curso.urlImagenPortada" class="card-img-top" [alt]="curso.titulo" style="height: 150px; object-fit: cover;" />
              <div class="card-body d-flex flex-column">
                <!-- Título del curso -->
                <h5 class="card-title fw-bold mb-1" style="min-height: 2.5em;">{{ curso.titulo }}</h5>
                
                <!-- Instructor (Dato de ejemplo) -->
                <p class="card-text small text-muted mb-2">{{curso.instructor}}</p>
                
                <!-- Calificación (Dato de ejemplo) -->
                <div class="d-flex align-items-center gap-1 small mb-2">

                  <span class="text-muted">Ult. Modificado: {{curso.fechaActualizacion | date : "dd MMMM yyyy"}}</span>
                </div>
                
                <!-- Precio (Dato de ejemplo) -->
                <div class="d-flex align-items-baseline mb-2 ml-2">
                  <span class="text-muted small">Suscribete por: </span>
                  <span class="fw-bold fs-5 me-2">$49.99</span>
                </div>

                <!-- Etiqueta (Dato de ejemplo) -->
                @if ($index % 3 == 0) { <!-- Lógica de ejemplo para mostrar la etiqueta -->
                  <div>
                    <span class="badge bg-info bg-opacity-25 text-info fw-semibold">Popular</span>
                  </div>
                }
              </div>
            </div>
          }
        </div>
      </div>
    }
  }
</div>
